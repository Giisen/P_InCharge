@page "/"
@inject HttpClient Http

<PageTitle>Home</PageTitle>

<div>
    <MudSelect Dense="true" T="string" Label="Year" Variant="Variant.Outlined" @bind-Value="inputyear">
        @foreach (var year in listofyears)
        {
            <MudSelectItem Value="@year" />
        }
    </MudSelect>
</div>
<div>
    <MudSelect Dense="true" T="string" Label="Month" Variant="Variant.Outlined" @bind-Value="inputmonth">
        @foreach (var month in listofMonths)
        {
            <MudSelectItem Value="@month" />
        }
    </MudSelect>
</div>
<div class="mb-3">
    <MudSelect Dense="true" T="string" Label="Day" Variant="Variant.Outlined" @bind-Value="inputday">
        @foreach (var day in listofDays)
        {
            <MudSelectItem Value="@day" />
        }
    </MudSelect>
</div>

<MudButton class="mb-5" OnClick="@GetData" Variant="Variant.Filled">Get Data</MudButton>


<div style="display: flex; align-items: center;">
    @if (showYear)
    {
        <MudCard Class="mr-1" Style="padding: 3px;">
            <MudCardHeader>
                <CardHeaderContent>
                    <MudText Style="font-size: 16px">@yearlyCost.Year</MudText>
                </CardHeaderContent>
            </MudCardHeader>
            <MudCardContent Style="padding: 3px;">
                <div style="display: flex; flex-direction: column;">
                    <div style="display: flex; align-items: center;">
                        <MudIconButton Icon="@Icons.Material.Filled.AttachMoney" Color="Color.Default" Size="Size.Small" />
                        <MudText>@yearlyCost.Cost kr</MudText>
                    </div>
                    <div style="display: flex; align-items: center;">
                        <MudIconButton Icon="@Icons.Material.Filled.ElectricBolt" Color="Color.Default" Size="Size.Small" />
                        <MudText>@yearlyCost.GridCharge kWh</MudText>
                    </div>
                    <div style="display: flex; align-items: center;">
                        <MudIconButton Icon="@Icons.Material.Filled.SolarPower" Color="Color.Default" Size="Size.Small" />
                        <MudText>@yearlyCost.SolarCharge kWh</MudText>
                    </div>
                </div>
            </MudCardContent>
        </MudCard>
    }

    @if (showMonth)
    {
        <MudCard Class="mr-1" Style="padding: 3px;">
            <MudCardHeader>
                <CardHeaderContent>
                    <MudText Style="font-size: 16px">@monthlyCost.Date</MudText>
                </CardHeaderContent>
            </MudCardHeader>
            <MudCardContent Style="padding: 3px;">
                <div style="display: flex; flex-direction: column;">
                    <div style="align-items: center;">
                        <div style="display: flex; align-items: center;">
                            <MudIconButton Icon="@Icons.Material.Filled.AttachMoney" Color="Color.Default"
                                Size="Size.Small" />
                            <MudText>@monthlyCost.Cost kr</MudText>
                        </div>
                        <div style="display: flex; align-items: center;">
                            <MudIconButton Icon="@Icons.Material.Filled.ElectricBolt" Color="Color.Default"
                                Size="Size.Small" />
                            <MudText>@monthlyCost.GridCharge kWh</MudText>
                        </div>
                        <div style="display: flex; align-items: center;">
                            <MudIconButton Icon="@Icons.Material.Filled.SolarPower" Color="Color.Default"
                                Size="Size.Small" />
                            <MudText>@monthlyCost.SolarCharge kWh</MudText>
                        </div>
                    </div>
                </div>

            </MudCardContent>
        </MudCard>
    }

    @if (showDay)
    {
        <MudCard Class="mt-5 mb-5" Style="padding: 3px;">
            <MudCardHeader>
                <CardHeaderContent>
                    <MudText Style="font-size: 16px">@dailyCost.Date</MudText>
                </CardHeaderContent>
            </MudCardHeader>
            <MudCardContent Style="padding: 3px;">
                <div style="display: flex; flex-direction: column;">
                    <div style="align-items: center;">
                        <div style="display: flex; align-items: center;">
                            <MudIconButton Icon="@Icons.Material.Filled.AttachMoney" Color="Color.Default"
                                Size="Size.Small" />
                            <MudText>@dailyCost.Cost kr</MudText>
                        </div>
                        <div style="display: flex; align-items: center;">
                            <MudIconButton Icon="@Icons.Material.Filled.ElectricBolt" Color="Color.Default"
                                Size="Size.Small" />
                            <MudText>@dailyCost.GridCharge kWh</MudText>
                        </div>
                        <div style="display: flex; align-items: center;">
                            <MudIconButton Icon="@Icons.Material.Filled.SolarPower" Color="Color.Default"
                                Size="Size.Small" />
                            <MudText>@dailyCost.SolarCharge kWh</MudText>
                        </div>
                    </div>
                </div>
            </MudCardContent>
        </MudCard>
    }
</div>

<div class="mt-3">
    <script src="https://www.elprisetjustnu.se/api/v1/iframeResizer.min.js"></script>
    <iframe title="Elpriser från elprisetjustnu.se"
        src="https://www.elprisetjustnu.se/i/stockholm?mode=embed&hide-examples=1&background=383843&layout=no-header&layout=minimal"
        style="width:100%;height:100%;border:0; "
        onload="iFrameResize({heightCalculationMethod: 'taggedElement', checkOrigin: false}, this);"></iframe>
</div>


@code {


}